<html>
    <head>
        <title>Genshin Damage Calculator</title>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/padding.css">
        <link rel="stylesheet" href="css/bootstrap-checkbox.css">
        <script src="js/formula.js"></script>
        <script src="js/switches.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
    </head>
    <body style="background-color: #131212;">
        <div class="main-page-wrapper">
            <div class="main-page-subwrap">
                <div class="info-page">
                    <div class="total-damage-pc">
                        <h3 style="margin: 10px; text-align: center;">Total Damage:</h3>
                        <h1 style="margin: 10px; text-align: center;">~<span id="total-damage"></span></h1>
                        <h6 style="text-align: center; color: #9292d3;">Made by Liqht#8961</h6>
                        <h6 style="text-align: center;">To get the highest possible damage, snapshot your stats when you execute your usual team combo.</h6>
                    </div>
                    <div class="padding-sm"></div>
                    <div class="calc-section">
                        <h5 style="text-align: center;">What is base ATK / Added ATK?</h5>
                    </div>
                    <div class="img-holder">
                        <img src="assets/atk.PNG">
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;">The <strong>white text</strong> is the base ATK. The <strong>green text</strong> is the the added ATK.</p>
                    <div class="calc-section">
                        <h5 style="text-align: center;">Why is world level and character level needed?</h5>
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;">To get the most accurate results for your damage,  we must also take into account the enemy's DEF and RES. Both of which scales with the enemy's lvl and your current active character's lvl.</p>
                    <div class="calc-section">
                        <h5 style="text-align: center;">What is reaction bonus?</h5>
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;"><strong>Reaction bonus</strong> are percentage bonuses of Elemental Reactions from pieces such as 4 PC Thundering Fury, 4 PC Crimson Witch, 4 VV etc.</p>

                    <div class="calc-section">
                        <h5 style="text-align: center;">What is RES / DEF reduction?</h5>
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;"><strong>RES/DEF reduction</strong> refers to bonuses from skills, sets, constellations (and more) that reduces DEF and RES  like 4 VV, Zhongli's Shield, Eula's E skill etc.</p>

                    <div class="calc-section">
                        <h5 style="text-align: center;">What are weapon procs?</h5>
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;"><strong>Weapon procs</strong> are seperate triggered-effects bonuses from weapons. Examples of this is Prototype Archaic 240% ATK in an AOE, Dragonspine Spear Icicle, Snow-Tombed star silver icicle, etc. They don't count to your single-hit damage but counts to your total damage.</p>
                    <div class="calc-section">
                        <h5 style="text-align: center;">Missed something?</h5>
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;">You can add your own multiplier if you think we've missed something.</p>
                </div>
                <div class="main-page">
                    <h3 style="margin: 10px; text-align: center;">Genshin Damage Calculator</h3>
                    <h5 style="margin: 10px; text-align: center;">A simple, lightweight genshin total damage calculator. Fully editable variables, formula is found <a style="color: #4f4f75;"href="https://library.keqingmains.com/mechanics/combat/damage-formula">here.</a></h5>
                    <h5 style="text-align: center; color: #9292d3;" id="debug-text"></h5>
                    <div class="total-damage-mobile">
                        <h3 style="margin: 10px; text-align: center;">Total Damage:</h3>
                        <h1 style="margin: 10px; text-align: center;">~<span id="total-damage-mobile"></span></h1>
                        <h6 style="text-align: center; color: #9292d3;">Made by Liqht#8961</h6>
                    </div>
                    <div class="calc-row-wrapper">
                        <div class="calc-row">
                            <button class="btn btn-outline-secondary" type="button" id="button-addon2">Add a multiplier</button>
                        </div>
                    </div>
                    <div class="calc-section">
                        <h5 style="text-align: left;">Player Info <span style="color: rgb(226, 123, 123); font-size: 15px;">required to unlock other inputs</span></h5>
                        <div class="form-check form-switch">
                            <style>
                                .form-check-input {
                                    background-color: #3a3b3c; border-color: #242526;
                                }
                                .form-check-input:checked {
                                    border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;
                                }
                            </style>
                            <input class="form-check-input" type="checkbox" id="accuracy-switch" onclick="accuracyswitchcheck();">
                            <label class="form-check-label" for="accuracy-switch">Accuracy Mode</label>
                        </div>
                    </div>
                    <div class="calc-row-wrapper">
                        <div class="calc-row">
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" style="border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;" type="button" id="world-lvl-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                  World Level: <span id="world-lvl"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="world-lvl-dropdown">
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(1);">1</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(2);">2</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(3);">3</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(4);">4</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(5);">5</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(6);">6</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(7);">7</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(8);">8</a></li>
                                </ul>
                            </div>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" style="border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;" type="button" id="char-lvl-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                    Character Level: <span id="char-lvl"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="char-lvl-dropdown">
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(10);">10</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(20);">20</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(30);">30</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(40);">40</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(50);">50</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(60);">60</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(70);">70</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(80);">80</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(90);">90</a></li>
                                </ul>
                            </div>
                            <div class="input-group mb-3" style="visibility: hidden;" id="enemy-accuracy-lvl">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Enemy Level</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="enemy-lvl">
                            </div>
                        </div>
                    </div>
                    <div class="calc-section">
                        <h5 style="text-align: left;">Character ATK Info</h5>
                    </div>
                    <div class="calc-row-wrapper">
                        <div class="calc-row">
                            <div class="input-group mb-3">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Base ATK</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="base-atk">
                            </div>
                            <div class="input-group mb-3">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Added ATK</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="added-atk">
                            </div>
                        </div>
                    </div>
                    <div class="calc-section">
                        <h5 style="text-align: left;">Multipliers <span class="text-muted">(Note: No need to input % sign)</span></h5>
                    </div>
                    <div class="calc-row-wrapper">
                        <div class="calc-row">
                            <div class="input-group">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Elem DMG Bonus%</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="elem-dmg-bonus">
                            </div>
                            <div class="input-group" id="skill-multiplier">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Skill Multiplier%</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="skill-multiplier-input">
                            </div>
                        </div>
                    </div>
                    <div class="calc-row-wrapper">
                        <div class="calc-row">
                            <div class="input-group">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Crit Rate%</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="crit-rate">
                            </div>
                            <div class="input-group">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Crit DMG%</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="crit-dmg">
                            </div>
                        </div>
                    </div>
                    <div id="em-section">
                        <div class="calc-section">
                            <h5>Elemental Mastery</h5>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="transformative-switch" onclick="transformativeswitchcheck();">
                                <label class="form-check-label" for="transformative-switch">Include Transformative Reaction</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="vap-switch" onclick="vaporizemeltswitchcheck();">
                                <label class="form-check-label" for="vap-switch">Is using vaporize/melt</label>
                            </div>
                        </div>
                        <div class="calc-row-wrapper">
                            <div class="calc-row">
                                <div class="input-group">
                                    <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Elemental Mastery</span>
                                    <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="em-input">
                                </div>
                                <div class="input-group">
                                    <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Reaction Bonus%</span>
                                    <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="reaction-bonus-multiplier">
                                </div>
                            </div>
                        </div>
                        <div class="calc-row-wrapper">
                            <div class="calc-row">
                                <div class="dropdown" id="vapmelt">
                                    <button class="btn btn-secondary dropdown-toggle" style="border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;" type="button" id="vapmelt-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                    Vaporize/Melt <span id="em-multiplier-label"></span>x
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="vapmelt-dropdown">
                                    <li><a class="dropdown-item" onclick="setEMBaseMultiplier(1)">1x</a></li>
                                    <li><a class="dropdown-item" onclick="setEMBaseMultiplier(1.5)">1.5x</a></li>
                                    <li><a class="dropdown-item" onclick="setEMBaseMultiplier(2)">2x</a></li>
                                    </ul>
                                </div>
                                <div class="dropdown" id="transformative-reaction">
                                    <button class="btn btn-secondary dropdown-toggle" style="border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;" type="button" id="transformative-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                    Transformative Reaction 
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="transformative-dropdown">
                                    <li><a class="dropdown-item" href="#">Overloaded</a></li>
                                    <li><a class="dropdown-item" href="#">Shatter</a></li>
                                    <li><a class="dropdown-item" href="#">Electro Charged</a></li>
                                    <li><a class="dropdown-item" href="#">Swirl</a></li>
                                    <li><a class="dropdown-item" href="#">Superconduct</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="res-def-section">
                        <div class="calc-section">
                            <h5>RES / DEF Multipliers</h5>
                        </div>
                        <div clsas="calc-row-wrapper">
                            <div class="calc-row">
                                <div class="input-group mb-3" id="res-decrease">
                                    <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">RES reduction%</span>
                                    <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="res-reduction">
                                </div>
                                <div class="input-group mb-3" id="def-decrease">
                                    <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">DEF reduction%</span>
                                    <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="def-reduction">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="weapon-procs-section">
                        <div class="calc-section">
                            <h5>Weapon/Skill Procs</h5>
                        </div>
                        <div class="calc-row-wrapper">
                            <div class="calc-row">
                                <div class="input-group mb-3" id="weapon-procs">
                                    <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Weapon Procs%</span>
                                    <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                                </div>
                                <div class="dropdown">
                                    <button class="btn btn-secondary dropdown-toggle" style="border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;" type="button" id="weapon-procs-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                      Scales from...
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="weapon-procs-dropdown">
                                      <li><a class="dropdown-item" href="#">HP</a></li>
                                      <li><a class="dropdown-item" href="#">ATK</a></li>
                                      <li><a class="dropdown-item" href="#">DEF</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="calc-section" id="debug-console">
                        <style>
                            p {
                                margin-bottom: 0;
                            }
                        </style>
                        <h5>Debug Console</h5>
                        <p>worldLvl: <span id="world-lvl-debug"></span></p>
                        <p>charLvl: <span id="char-lvl-debug"></span></p>
                        <p>defMultiplier: <span id="def-debug"></span></p>
                        <p>resistance: <span id="res-debug"></span></p>
                        <p>resMultiplier: <span id="res-mult-debug"></span></p>
                        <p>avgCrit: <span id="avgcrit-debug"></span></p>
                        <p>enemyLvl: <span id="enemylvl-debug"></span></p>
                        <p>emMultiplier: <span id="em-mult-debug"></span></p>
                    </div>
                </div>
                <div class="padding-sm"></div>
            </div>
            
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script type="text/javascript">
        // SWITCHES
        var em_switch             = document.getElementById("em-switch");
        var res_def_switch        = document.getElementById("res-def-switch");
        var weapon_switch         = document.getElementById("weapon-procs-switch");
        var accuracy_switch       = document.getElementById("accuracy-switch");
        var transformative_switch = document.getElementById("transformative-switch");
        var vap_switch            = document.getElementById("vap-switch");

        var enemy_accuracy_lvl = document.getElementById("enemy-accuracy-lvl");

        // SECTIONS
        var em_section               = document.getElementById("em-section");
        var res_def_section          = document.getElementById("res-def-section");
        var weapon_section           = document.getElementById("weapon-procs-section");
        var transformative_drop_base = document.getElementById("transformative-reaction");
        var vapmelt_drop_base        = document.getElementById("vapmelt");
        var vapmelt_dropdown         = document.getElementById("vapmelt-dropdown");
        var transformative_dropdown  = document.getElementById("transformative-dropdown")

        // LABELS
        var debug_text_label          = document.getElementById("debug-text");
        var world_level_label         = document.getElementById("world-lvl");
        var char_level_label          = document.getElementById("char-lvl");
        var total_damage_label        = document.getElementById("total-damage");
        var total_damage_label_mobile = document.getElementById("total-damage-mobile");
        var em_mult_label             = document.getElementById("em-multiplier-label");

        var worldD    = document.getElementById("world-lvl-debug");
        var charD     = document.getElementById("char-lvl-debug");
        var defD      = document.getElementById("def-debug");
        var avgcritD  = document.getElementById("avgcrit-debug");
        var enemylvlD = document.getElementById("enemylvl-debug");
        var resD      = document.getElementById("res-debug");
        var res_multD = document.getElementById("res-mult-debug");
        var em_multD  = document.getElementById("em-mult-debug");

        // GLOBAL VARIABLES
        var percent                  = 100;

        var world_level              = 0;
        var char_level               = 0;
        var enemy_level              = 0;

        var def_multiplier           = 1;
        var res_multiplier           = 1;

        var base_atk                 = 0;
        var added_atk                = 0; 

        var elem_dmg_bonus           = 1; 
        var elem_dmg                 = 1;

        var crit_rate_percent        = 0;
        var crit_rate                = 0;
        var crit_dmg_percent         = 0; 
        var crit_dmg                 = 0;

        var skill_multiplier_percent = 1;
        var skill_dmg                = 1;

        var def_reduction            = 0;
        var res_reduction            = 0;

        var vapmelt_base_mult        = 1;
        var em                       = 0;
        var reaction_bonus           = 0;

        $(document).ready(function() {

        });

        function calculateTotalDamage() {           
            if (document.getElementById("base-atk").value != 0 )                { base_atk                 = parseInt(document.getElementById("base-atk").value); }
            if (document.getElementById("added-atk").value != 0 )               { added_atk                = parseInt(document.getElementById("added-atk").value); }
            if (document.getElementById("elem-dmg-bonus").value != 0 )          { elem_dmg_bonus           = parseInt(document.getElementById("elem-dmg-bonus").value);         elem_dmg = 1 + (elem_dmg_bonus / percent); }
            if (document.getElementById("crit-dmg").value != 0 )                { crit_dmg_percent         = parseInt(document.getElementById("crit-dmg").value);               crit_dmg = (crit_dmg_percent / percent); } 
            if (document.getElementById("crit-rate").value != 0 )               { crit_rate_percent        = parseInt(document.getElementById("crit-rate").value);              crit_rate = (crit_rate_percent / percent); } 
            if (document.getElementById("skill-multiplier-input").value != 0 )  { skill_multiplier_percent = parseInt(document.getElementById("skill-multiplier-input").value); skill_dmg = 1 + (skill_multiplier_percent / percent); }
            if (document.getElementById("def-reduction").value != 0)            { def_reduction            = parseInt(document.getElementById("def-reduction").value); }
            if (document.getElementById("res-reduction").value != 0)            { res_reduction            = parseInt(document.getElementById("res-reduction").value); }
            if (document.getElementById("em-input").value != 0)                 { em                       = parseInt(document.getElementById("em-input").value); } else if (document.getElementById("em-input").value == 0) { em = 0;}
            if (document.getElementById("reaction-bonus-multiplier").value != 0){ reaction_bonus           = parseInt(document.getElementById("reaction-bonus-multiplier").value); } else if (document.getElementById("reaction-bonus-multiplier").value == 0) { reaction_bonus = 0; }

            // DEF Multiplier
            def_multiplier = (char_level + 100) / (((char_level + 100) + (enemy_level + 100)) * (1 - (def_reduction / percent)));

            // RES Multiplier
            var base_resistance = 10;
            var resistance      = (base_resistance - res_reduction) / percent;

            if      (resistance < 0)                       { res_multiplier = 1 - (resistance / 2); }     // Negative resistance
            else if (0 <= resistance && resistance < 0.75) { res_multiplier = 1 - resistance; }           // 0% - 75% resistance
            else if (resistance >= 0.75)                   { res_multiplier = 1 / (4 * resistance + 1); } // >75% resistance

            // Average Crit
            var avg_crit = 1 + (crit_rate * crit_dmg);

            // Elemental Mastery (AMPING)
            var em_multiplier = 1;
            if      (vapmelt_base_mult == 2)   { em_multiplier = 2   * (1 + ((2.78 * em) / (1400 + em)) + (reaction_bonus / percent)); }
            else if (vapmelt_base_mult == 1.5) { em_multiplier = 1.5 * (1 + ((2.78 * em) / (1400 + em)) + (reaction_bonus / percent)); } 
            else if (vapmelt_base_mult == 1)   { em_multiplier = 1; }


            // Formula
            var total_dmg = (base_atk + added_atk) * elem_dmg * avg_crit * skill_dmg * em_multiplier * def_multiplier * res_multiplier;

            // TODO:
            // Elemental Mastery Transformative and Amping
            // Weapon Procs
            // Custom multipliers
            
            total_damage_label.innerHTML        = Math.round(total_dmg);
            total_damage_label_mobile.innerHTML = Math.round(total_dmg);

            // Debug
            defD.innerHTML      = def_multiplier;
            avgcritD.innerHTML  = avg_crit;
            resD.innerHTML      = resistance;
            res_multD.innerHTML = res_multiplier;
            em_multD.innerHTML  = em_multiplier;
        }
        function enteredWorldLevel() {
            if      (enemy_level == 0 && char_level == 0) { debug_text_label.innerHTML = "Please enter your world level and character level." } 
            else if (enemy_level != 0 && char_level != 0) { debug_text_label.style.display = "none"; }

            if (accuracy_switch.checked == false) {
                document.getElementById("world-lvl-dropdown").classList.remove("disabled");
                if (world_level == 1) { enemy_level = 24; } 
                else if (world_level == 2) { enemy_level = 30; }
                else if (world_level == 3) { enemy_level = 41; }
                else if (world_level == 4) { enemy_level = 52; }
                else if (world_level == 5) { enemy_level = 63; }     
                else if (world_level == 6) { enemy_level = 74; }   
                else if (world_level == 7) { enemy_level = 82; }    
                else if (world_level == 8) { enemy_level = 85; }} 

            else if (accuracy_switch.checked == true) {
                if (document.getElementById("enemy-lvl").value != 0) { enemy_level = parseInt(document.getElementById("enemy-lvl").value); }
                document.getElementById("world-lvl-dropdown").classList.add("disabled");
            }

            // When entered world level and character level, unlock forms
            var forms = document.getElementsByClassName("calc-locked");
            if ((world_level || enemy_level) && char_level != 0) {     
                for (var i = forms.length - 1; i >= 0; i--) {
                    forms[i].removeAttribute('readonly');
                }
            }

            em_mult_label.innerHTML = vapmelt_base_mult;
            enemylvlD.innerHTML     = enemy_level;    
            worldD.innerHTML        = world_level;
            charD.innerHTML         = char_level;

        }

        function increaseWorldLvl(lvl) { world_level = lvl; world_level_label.innerHTML = world_level; }
        function increaseCharLvl(lvl) { char_level = lvl; char_level_label.innerHTML = char_level;  }
        function setEMBaseMultiplier(mult) { vapmelt_base_mult = mult; }

        function accuracyswitchcheck() {
            if (accuracy_switch.checked == true) {
                enemy_accuracy_lvl.style.visibility = "visible"; 
            } else {
                enemy_accuracy_lvl.style.visibility = "hidden";
            }  
        }
        function transformativeswitchcheck() {
            if (transformative_switch.checked == true) {
                vapmelt_dropdown.classList.add("disabled"); 
                vap_switch.setAttribute('disabled', true);
            } else {
                vapmelt_dropdown.classList.remove("disabled");
                vap_switch.removeAttribute('disabled');
            }  
        }
        function vaporizemeltswitchcheck() {
            if (vap_switch.checked == true) {
                transformative_dropdown.classList.add("disabled"); 
                transformative_switch.setAttribute('disabled', true);
            } else {
                transformative_dropdown.classList.remove("disabled");
                transformative_switch.removeAttribute('disabled');
            }   
        }
        $(function() {
            setInterval(calculateTotalDamage, 100);
        });

        $(function() {
            setInterval(enteredWorldLevel, 100);
        });
        </script>
    </body>
</html>